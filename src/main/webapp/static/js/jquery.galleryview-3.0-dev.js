if(typeof Object.create!=="function"){Object.create=function(e){function t(){}t.prototype=e;return new t}}(function(e){var t=function(e){this.src={panel:e.attr("src"),frame:e.data("frame")||e.attr("src")};this.scale={panel:null,frame:null};this.height=0;this.width=0;this.attrs={title:e.attr("title")||e.attr("alt"),description:e.data("description")};this.href=null;this.dom_obj=null;return this},n={getInt:function(e){e=parseInt(e,10);return isNaN(e)?0:e},innerWidth:function(e){return this.getInt(e.css("width"))||0},outerWidth:function(e){return this.innerWidth(e)+this.extraWidth(e)},extraWidth:function(e){return this.getInt(e.css("paddingLeft"))+this.getInt(e.css("paddingRight"))+this.getInt(e.css("borderLeftWidth"))+this.getInt(e.css("borderRightWidth"))},innerHeight:function(e){return this.getInt(e.css("height"))||0},outerHeight:function(e){return this.innerHeight(e)+this.extraHeight(e)},extraHeight:function(e){return this.getInt(e.css("paddingTop"))+this.getInt(e.css("paddingBottom"))+this.getInt(e.css("borderTopWidth"))+this.getInt(e.css("borderBottomWidth"))}},r={elems:[".gv_galleryWrap",".gv_gallery",".gv_panelWrap",".gv_panel","img.gv_image",".gv_infobar",".gv_filmstripWrap",".gv_filmstrip",".gv_frame",".gv_thumbnail",".gv_caption","img.gv_thumb",".gv_navWrap",".gv_navNext",".gv_navPrev",".gv_navPlay",".gv_panelNavNext",".gv_panelNavPrev",".gv_overlay",".gv_showOverlay",".gv_imageStore"],createElem:function(t,n){n=document.createElement(n);var r=e(n);return r.attr(t)},getPos:function(e){var t=this,n=this.dom,e=e[0],r=e.id,i=0,s=0,o,u,a;if(!e){return{top:0,left:0}}if(e.offsetParent){do{i+=e.offsetLeft;s+=e.offsetTop}while(e=e.offsetParent)}if(r===t.id){return{left:i,top:s}}else{o=t.getPos(n.galleryWrap);u=o.left;a=o.top;return{left:i-u,top:s-a}}},mouseIsOverGallery:function(e,t){var r=this,i=this.dom,s=this.getPos(i.gv_galleryWrap),o=s.top,u=s.left;return e>u&&e<u+n.outerWidth(i.gv_galleryWrap)&&t>o&&t<o+n.outerHeight(i.gv_galleryWrap)},mouseIsOverPanel:function(e,t){var r=this,i=this.dom,s=this.getPos(i.gv_panelWrap),o=this.getPos(i.gv_galleryWrap),u=s.top+o.top,a=s.left+o.left;return e>a&&e<a+n.outerWidth(i.gv_panelWrap)&&t>u&&t<u+n.outerHeight(i.gv_panelWrap)},storeImages:function(){var n=this;this.sourceImgs=e("li>img",this.$el);this.numImages=this.sourceImgs.length;this.gvImages=[];this.sourceImgs.each(function(r,i){n.gvImages[r]=new t(e(i))})},setDimensions:function(){var t=this,r=this.dom,i={prev:n.innerWidth(r.gv_navPrev),play:n.innerWidth(r.gv_navPlay),next:n.innerWidth(r.gv_navNext),filmstrip:this.opts.frame_width,fsMax:0,fsFull:0},s={prev:n.innerHeight(r.gv_navPrev),play:n.innerHeight(r.gv_navPlay),next:n.innerHeight(r.gv_navNext),filmstrip:this.opts.frame_height+(this.opts.show_captions?n.outerHeight(r.gv_caption):0),fsMax:0,fsFull:0},o=[];if(this.filmstripOrientation==="horizontal"){r.gv_navWrap.css({width:i.prev+i.play+i.next,height:Math.max(s.prev,s.play,s.next)})}else{if(this.opts.filmstrip_style==="scroll"&&this.opts.frame_width<i.prev+i.play+i.next){r.gv_navWrap.css({width:Math.max(i.prev,i.play,i.next),height:s.prev+s.play+s.next})}else{r.gv_navWrap.css({width:i.prev+i.play+i.next,height:Math.max(s.prev,s.play,s.next)})}}if(this.filmstripOrientation==="vertical"&&i.filmstrip<i.prev+i.play+i.next){r.gv_navWrap.css({width:Math.max(i.prev,i.play,i.next),height:s.prev+s.play+s.next})}else{r.gv_navWrap.css({width:i.prev+i.play+i.next,height:Math.max(s.prev,s.play,s.next)})}r.gv_panel.css({width:this.opts.panel_width,height:this.opts.panel_height});r.gv_panelWrap.css({width:n.outerWidth(r.gv_panel),height:n.outerHeight(r.gv_panel)});r.gv_overlay.css({width:this.opts.panel_width});e.each(this.gvImages,function(e,t){r.gv_panelWrap.append(r.gv_panel.clone(true))});r.gv_panels=r.gv_panelWrap.find(".gv_panel");r.gv_panels.remove();r.gv_thumbnail.css({width:this.opts.frame_width,height:this.opts.frame_height});r.gv_frame.css({width:n.outerWidth(r.gv_thumbnail),height:n.outerHeight(r.gv_thumbnail)+(this.opts.show_captions?n.outerHeight(r.gv_caption):0),marginRight:this.opts.frame_gap,marginBottom:this.opts.frame_gap});if(this.filmstripOrientation==="horizontal"){this.filmstripSize=Math.floor((n.outerWidth(r.gv_panelWrap)-n.outerWidth(r.gv_navWrap))/(n.outerWidth(r.gv_frame)+this.opts.frame_gap));i.fsMax=this.filmstripSize*(n.outerWidth(r.gv_frame)+this.opts.frame_gap);i.fsFull=this.gvImages.length*(n.outerWidth(r.gv_frame)+this.opts.frame_gap);i.filmstrip=Math.min(i.fsMax,i.fsFull);if(this.opts.filmstrip_style!=="scroll"){s.filmstrip=Math.ceil(this.gvImages.length/this.filmstripSize)*(n.outerHeight(r.gv_frame)+this.opts.frame_gap)-this.opts.frame_gap}}else{this.filmstripSize=Math.floor((n.outerHeight(r.gv_panelWrap)-n.outerHeight(r.gv_navWrap))/(n.outerHeight(r.gv_frame)+this.opts.frame_gap));s.fsMax=this.filmstripSize*(n.outerHeight(r.gv_frame)+this.opts.frame_gap);s.fsFull=this.gvImages.length*(n.outerHeight(r.gv_frame)+this.opts.frame_gap);s.filmstrip=Math.min(s.fsMax,s.fsFull);if(this.opts.filmstrip_style!=="scroll"){i.filmstrip=Math.ceil(this.gvImages.length/this.filmstripSize)*(n.outerWidth(r.gv_frame)+this.opts.frame_gap)-this.opts.frame_gap}}r.gv_filmstripWrap.css({width:i.filmstrip,height:s.filmstrip});if(this.opts.show_filmstrip){if(this.filmstripOrientation==="horizontal"){r.gv_gallery.css({width:n.outerWidth(r.gv_panelWrap),height:n.outerHeight(r.gv_panelWrap)+this.opts.frame_gap+(this.opts.show_filmstrip?Math.max(n.outerHeight(r.gv_filmstripWrap),n.outerHeight(r.gv_navWrap)):n.outerHeight(r.gv_filmstripWrap))})}else{r.gv_gallery.css({width:n.outerWidth(r.gv_panelWrap)+this.opts.frame_gap+(this.opts.show_filmstrip?Math.max(n.outerWidth(r.gv_filmstripWrap),n.outerWidth(r.gv_navWrap)):n.outerWidth(r.gv_filmstripWrap)),height:n.outerHeight(r.gv_panelWrap)})}}else{r.gv_gallery.css({width:n.outerWidth(r.gv_panelWrap),height:n.outerHeight(r.gv_panelWrap)})}r.gv_galleryWrap.css({width:n.outerWidth(r.gv_gallery),height:n.outerHeight(r.gv_gallery),padding:this.opts.frame_gap})},setPositions:function(){var e=this,t=this.dom,r=0,i=0,s=0,o=0,u,a;if(this.filmstripOrientation==="horizontal"){u=Math.round((n.outerHeight(t.gv_filmstripWrap)-n.outerHeight(t.gv_navWrap))/2);if(u<0){i=-1*u}else{r=u}}else{a=Math.round((n.outerWidth(t.gv_filmstripWrap)-n.outerWidth(t.gv_navWrap))/2);if(a<0){o=-1*a}else{s=a}}if(!this.opts.show_filmstrip_nav&&this.filmstripOrientation==="horizontal"){o=Math.floor((n.outerWidth(t.gv_panelWrap)-n.outerWidth(t.gv_filmstripWrap))/2)}t.gv_panelNavNext.css({top:(n.outerHeight(t.gv_panel)-n.outerHeight(t.gv_panelNavNext))/2,right:10});t.gv_panelNavPrev.css({top:(n.outerHeight(t.gv_panel)-n.outerHeight(t.gv_panelNavPrev))/2,left:10});switch(this.opts.filmstrip_position){case"top":t.gv_navWrap.css({top:r,right:s});t.gv_panelWrap.css({bottom:0,left:0});t.gv_filmstripWrap.css({top:i,left:o});break;case"right":t.gv_navWrap.css({bottom:r,right:s});t.gv_panelWrap.css({top:0,left:0});t.gv_filmstripWrap.css({top:i,right:o});break;case"left":t.gv_navWrap.css({bottom:r,left:s});t.gv_panelWrap.css({top:0,right:0});t.gv_filmstripWrap.css({top:i,left:o});break;default:t.gv_navWrap.css({bottom:r,right:s});t.gv_panelWrap.css({top:0,left:0});t.gv_filmstripWrap.css({bottom:i,left:o});break}if(this.opts.overlay_position==="top"){t.gv_overlay.css({top:0,left:-99999});t.gv_showOverlay.css({top:0,left:0})}else{t.gv_overlay.css({bottom:0,left:-99999});t.gv_showOverlay.css({bottom:0,left:0})}if(!this.opts.show_filmstrip_nav){t.gv_navWrap.remove()}},buildFilmstrip:function(){var t=this,r=this.dom,i=this.gvImages.length*((this.filmstripOrientation==="horizontal"?this.opts.frame_width:this.opts.frame_height)+this.opts.frame_gap);r.gv_frame.append(r.gv_thumbnail);if(this.opts.show_captions){r.gv_frame.append(r.gv_caption)}r.gv_thumbnail.css("opacity",this.opts.frame_opacity);r.gv_thumbnail.bind({mouseover:function(){if(!e(this).hasClass("current")){e(this).stop().animate({opacity:1},250)}},mouseout:function(){if(!e(this).hasClass("current")){e(this).stop().animate({opacity:t.opts.frame_opacity},250)}}});e.each(this.gvImages,function(e,t){r.gv_frame.clone(true).prependTo(r.gv_filmstrip)});r.gv_filmstrip.css({width:n.outerWidth(r.gv_frame),height:n.outerHeight(r.gv_frame)});if(this.opts.filmstrip_style==="scroll"){if(this.filmstripOrientation==="horizontal"){if(i>n.innerWidth(r.gv_filmstripWrap)){r.gv_filmstrip.find(".gv_frame").clone(true).appendTo(r.gv_filmstrip).clone(true).appendTo(r.gv_filmstrip);r.gv_filmstrip.css("width",i*3);this.scrolling=true}else{r.gv_filmstrip.css("width",i)}}else{if(i>n.innerHeight(r.gv_filmstripWrap)){r.gv_filmstrip.find(".gv_frame").clone(true).appendTo(r.gv_filmstrip).clone(true).appendTo(r.gv_filmstrip);r.gv_filmstrip.css("height",i*3);this.scrolling=true}else{r.gv_filmstrip.css("height",i)}}}else{r.gv_filmstrip.css({width:parseInt(r.gv_filmstripWrap.css("width"),10)+this.opts.frame_gap,height:parseInt(r.gv_filmstripWrap.css("height"),10)+this.opts.frame_gap})}r.gv_frames=r.gv_filmstrip.find(".gv_frame");e.each(r.gv_frames,function(t,n){e(n).data("frameIndex",t)});r.gv_thumbnails=r.gv_filmstrip.find("div.gv_thumbnail")},buildGallery:function(){var e=this,t=this.dom;this.setDimensions();this.setPositions();if(this.opts.show_filmstrip){this.buildFilmstrip()}},showInfoBar:function(){if(!this.opts.show_infobar){return}var e=this,t=this.dom;t.gv_infobar.stop().stopTime("hideInfoBar_"+e.id).html(this.iterator+1+" of "+this.numImages).show().css("opacity",this.opts.infobar_opacity);t.gv_infobar.oneTime(2e3+this.opts.transition_speed,"hideInfoBar_"+e.id,function(){t.gv_infobar.fadeOut(1e3)})},initImages:function(){var t=this,r=this.dom;e.each(this.gvImages,function(i,s){var o=e("<img/>");o.css("visibility","hidden").data("index",i);o.bind("load.galleryview",function(){var i=e(this),o=i.data("index"),u=this.width,a=this.height,f=r[i.data("parent").type].eq(i.data("parent").index),l=n.innerWidth(f)/u,c=n.innerHeight(f)/a,h=f.hasClass("gv_panel")?"panel":"frame",p=0,d=0;s.scale[h]=t.opts[h+"_scale"]==="fit"?Math.min(l,c):Math.max(l,c);d=Math.round((n.innerWidth(f)-u*s.scale[h])/2);p=Math.round((n.innerHeight(f)-a*s.scale[h])/2);i.css({width:u*s.scale[h],height:a*s.scale[h],top:p,left:d});i.hide().css("visibility","visible");i.remove().appendTo(f);if(h==="frame"){i.fadeIn();f.parent().removeClass("gv_frame-loading");f.parent().find(".gv_caption").html(s.attrs.title)}else if(o===t.opts.start_frame-1){f.prependTo(r.gv_panelWrap);f.removeClass("gv_panel-loading");i.fadeIn();t.showInfoBar()}else{f.removeClass("gv_panel-loading");i.show()}});if(t.opts.show_panels){o.clone(true).data("parent",{type:"gv_panels",index:i}).appendTo(r.gv_imageStore).attr("src",s.src.panel)}if(t.opts.show_filmstrip){o.clone(true).data("parent",{type:"gv_thumbnails",index:i}).appendTo(r.gv_imageStore).attr("src",s.src.frame);if(r.gv_frames.length>r.gv_panels.length){o.clone(true).data("parent",{type:"gv_thumbnails",index:i+t.numImages}).appendTo(r.gv_imageStore).attr("src",s.src.frame);o.clone(true).data("parent",{type:"gv_thumbnails",index:i+t.numImages+t.numImages}).appendTo(r.gv_imageStore).attr("src",s.src.frame)}}})},showNext:function(){this.navAction="next";this.showItem(this.frameIterator+1)},showPrev:function(){this.navAction="prev";this.showItem(this.frameIterator-1)},showItem:function(t){if(isNaN(t)){return}if(!this.opts.show_filmstrip){t=t%this.numImages}var r=this,i=this.dom,s=t,o,u,a,f,l=false;if(t>=this.numImages){t=t%this.numImages}else if(t<0){t=this.numImages-1;if(i.gv_frames!=undefined){s=i.gv_frames.length-1}else{s=i.gv_panels.length-1}}f=i.gv_panels.eq(t);l=this.playing;if(l){this.stopSlideshow(false)}this.unbindActions();i.gv_gallery.oneTime(this.opts.transition_speed,"bindActions_"+r.id,function(){if(l){r.startSlideshow(false)}r.bindActions()});switch(this.opts.panel_animation){case"crossfade":i.gv_panels.eq(this.iterator).fadeOut(this.opts.transition_speed,function(){e(this).remove()});f.hide().prependTo(i.gv_panelWrap).fadeIn(this.opts.transition_speed);break;case"fade":i.gv_panels.eq(this.iterator).remove();f.hide().prependTo(i.gv_panelWrap).fadeIn(this.opts.transition_speed);break;case"slide":if(this.navAction==="next"||this.navAction==="frame"&&s>this.iterator){o=n.outerWidth(i.gv_panel);u=-1*n.outerWidth(i.gv_panel)}else{o=-1*n.outerWidth(i.gv_panel);u=n.outerWidth(i.gv_panel)}f.css({left:o}).appendTo(i.gv_panelWrap).animate({left:0},{duration:this.opts.transition_speed,easing:this.opts.easing});i.gv_panels.eq(this.iterator).animate({left:u},{duration:this.opts.transition_speed,easing:this.opts.easing,complete:function(){e(this).remove()}});break;default:i.gv_panels.eq(this.iterator).remove();f.prependTo(i.gv_panelWrap);break}this.updateOverlay(t);this.iterator=t;this.updateFilmstrip(s);this.showInfoBar()},updateOverlay:function(e){var t=this,n=this.dom;if(this.overlayVisible){this.hideOverlay(null,function(){n.gv_overlay.html("<h4>"+t.gvImages[e].attrs.title+"</h4><p>"+t.gvImages[e].attrs.description+"</p>");t.showOverlay()})}else{n.gv_overlay.html("<h4>"+t.gvImages[e].attrs.title+"</h4><p>"+t.gvImages[e].attrs.description+"</p>");n.gv_overlay.css(this.opts.overlay_position,-1*n.gv_overlay.outerHeight())}},hideOverlay:function(e,t){var n=this,r=this.dom,i={},s={},o=e||n.opts.transition_speed/2;t=t||function(){};i[this.opts.overlay_position]=-1*r.gv_overlay.outerHeight();s[this.opts.overlay_position]=0;r.gv_overlay.animate(i,{duration:o,easing:"swing",complete:t});r.gv_showOverlay.animate(s,{duration:o,easing:"swing"});this.overlayVisible=false},showOverlay:function(e){var t=this,n=this.dom,r={},i={},s={},o=e||t.opts.transition_speed/2;r[this.opts.overlay_position]=-1*n.gv_overlay.outerHeight();r.left=0;i[this.opts.overlay_position]=0;s[this.opts.overlay_position]=n.gv_overlay.outerHeight();n.gv_overlay.css(r);n.gv_overlay.animate(i,{duration:o,easing:"swing"});n.gv_showOverlay.animate(s,{duration:o,easing:"swing"});this.overlayVisible=true},updateFilmstrip:function(e){if(!this.opts.show_filmstrip){this.frameIterator=e;return}var t=this,r=this.dom,i=r.gv_thumbnails.eq(this.iterator),s,o;if(this.scrolling){i=i.add(r.gv_thumbnails.eq(this.iterator+this.numImages)).add(r.gv_thumbnails.eq(this.iterator+2*this.numImages))}r.gv_thumbnails.removeClass("current").animate({opacity:this.opts.frame_opacity});i.stop().addClass("current").animate({opacity:1},500);if(this.scrolling){if(this.filmstripOrientation==="horizontal"){o=(n.outerWidth(r.gv_frame)+this.opts.frame_gap)*(this.frameIterator-e);if(o>0){o="+="+Math.abs(o)}else{o="-="+Math.abs(o)}r.gv_filmstrip.animate({left:o},{duration:this.opts.transition_speed,easing:this.opts.easing,complete:function(){if(e<t.numImages){r.gv_filmstrip.css("left",n.getInt(r.gv_filmstrip.css("left"))-t.numImages*(n.outerWidth(r.gv_frame)+t.opts.frame_gap))}else if(e>=t.numImages*2){r.gv_filmstrip.css("left",n.getInt(r.gv_filmstrip.css("left"))+t.numImages*(n.outerWidth(r.gv_frame)+t.opts.frame_gap))}t.frameIterator=e%t.numImages+t.numImages}})}else{o=(n.outerHeight(r.gv_frame)+this.opts.frame_gap)*(this.frameIterator-e);if(o>0){o="+="+Math.abs(o)}else{o="-="+Math.abs(o)}r.gv_filmstrip.animate({top:o},{duration:this.opts.transition_speed,easing:this.opts.easing,complete:function(){if(e===0){r.gv_filmstrip.css("top",n.getInt(r.gv_filmstrip.css("top"))-t.numImages*(n.outerHeight(r.gv_frame)+t.opts.frame_gap));t.frameIterator=t.numImages}else if(e>t.numImages*3-t.filmstripSize*2){r.gv_filmstrip.css("top",n.getInt(r.gv_filmstrip.css("top"))+t.numImages*(n.outerHeight(r.gv_frame)+t.opts.frame_gap));t.frameIterator=e-t.numImages}else{t.frameIterator=e}}})}}else{this.frameIterator=e}},startSlideshow:function(e){var t=this,n=this.dom;if(!t.opts.enable_slideshow){return}if(e){n.gv_navPlay.removeClass("gv_navPlay").addClass("gv_navPause")}this.playing=true;n.gv_galleryWrap.everyTime(this.opts.transition_interval,"slideshow_"+this.id,function(){t.showNext()})},stopSlideshow:function(e){var t=this,n=this.dom;if(e){n.gv_navPlay.removeClass("gv_navPause").addClass("gv_navPlay")}this.playing=false;n.gv_galleryWrap.stopTime("slideshow_"+this.id)},enablePanning:function(){var t=this,r=this.dom;if(!t.opts.enable_slideshow){return}r.gv_panel.css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), n-resize");if(this.opts.pan_style==="drag"){r.gv_panelWrap.delegate(".gv_panel img","mousedown.galleryview",function(n){t.isMouseDown=true;e(this).css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), n-resize")}).delegate(".gv_panel img","mouseup.galleryview",function(n){t.isMouseDown=false;e(this).css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), n-resize")}).delegate(".gv_panel img","mousemove.galleryview",function(i){var s,o,u=e(this),a,f;if(t.isMouseDown){s=i.pageY-t.mouse.y;o=i.pageX-t.mouse.x;a=n.getInt(u.css("top"))+s;f=n.getInt(u.css("left"))+o;u.css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), n-resize");if(a>0)a=0;if(f>0)f=0;if(a<-1*(n.outerHeight(u)-n.innerHeight(r.gv_panel))){a=-1*(n.outerHeight(u)-n.innerHeight(r.gv_panel))}if(f<-1*(n.outerWidth(u)-n.innerWidth(r.gv_panel))){f=-1*(n.outerWidth(u)-n.innerWidth(r.gv_panel))}u.css("top",a);u.css("left",f)}else{u.css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), n-resize")}})}else{}},bindActions:function(){var t=this,n=this.dom;n.gv_showOverlay.bind("click.galleryview",function(){if(t.overlayVisible){t.hideOverlay(250)}else{t.showOverlay(250)}});n.gv_navWrap.delegate("div","click.galleryview",function(){var n=e(this);if(n.hasClass("gv_navNext")){t.showNext()}else if(n.hasClass("gv_navPrev")){t.showPrev()}else if(n.hasClass("gv_navPlay")){t.startSlideshow(true)}else if(n.hasClass("gv_navPause")){t.stopSlideshow(true)}return false});n.gv_panelNavNext.bind("click.galleryview",function(){t.showNext();return false});n.gv_panelNavPrev.bind("click.galleryview",function(){t.showPrev();return false});n.gv_filmstripWrap.delegate(".gv_frame","click.galleryview",function(){var n=e(this),r=n.data("frameIndex");this.navAction="frame";t.showItem(r);return false});n.gv_panelWrap.bind("mouseover.galleryview",function(){t.showPanelNav()}).bind("mouseout.galleryview",function(){t.hidePanelNav()})},unbindActions:function(){var e=this,t=this.dom;t.gv_showOverlay.unbind("click.galleryview");t.gv_panelNavNext.unbind("click.galleryview");t.gv_panelNavPrev.unbind("click.galleryview");t.gv_navWrap.undelegate("div","click.galleryview");t.gv_filmstripWrap.undelegate(".gv_frame","click.galleryview")},showPanelNav:function(){var e=this,t=this.dom;t.gv_panelNavNext.show();t.gv_panelNavPrev.show()},hidePanelNav:function(){var e=this,t=this.dom;t.gv_panelNavNext.hide();t.gv_panelNavPrev.hide()},init:function(t,n){var r=this,i=this.dom={};this.opts=e.extend({},e.fn.galleryView.defaults,t);this.el=n;this.$el=e(n);this.id=n.id;this.iterator=this.frameIterator=this.opts.start_frame-1;this.overlayVisible=false;this.playing=false;this.scrolling=false;this.isMouseDown=false;this.mouse={x:0,y:0};this.filmstripOrientation=this.opts.filmstrip_position==="top"||this.opts.filmstrip_position==="bottom"?"horizontal":"vertical";e(document).bind("mousemove.galleryview",function(e){r.mouse={x:e.pageX,y:e.pageY}});e.each(this.elems,function(e,t){var t=t.split(".");if(t[0]===""){t[0]="div"}i[t[1]]=r.createElem({"class":t[1]},t[0])});i.gv_imageStore.appendTo(e("body"));i.gv_galleryWrap.delegate("img","mousedown.galleryview",function(e){if(e.preventDefault){e.preventDefault()}});i.gv_panel.addClass("gv_panel-loading");i.gv_frame.addClass("gv_frame-loading");i.gv_galleryWrap.hide().append(i.gv_gallery);if(this.opts.show_panels){i.gv_gallery.append(i.gv_panelWrap);if(this.opts.show_panel_nav){i.gv_panelWrap.append(i.gv_panelNavNext,i.gv_panelNavPrev)}if(this.opts.show_infobar){i.gv_panelWrap.append(i.gv_infobar)}}if(this.opts.show_filmstrip){i.gv_gallery.append(i.gv_filmstripWrap.append(i.gv_filmstrip));if(this.opts.show_filmstrip_nav){i.gv_gallery.append(i.gv_navWrap.append(i.gv_navPrev,this.opts.enable_slideshow?i.gv_navPlay:e("<span></span>"),i.gv_navNext))}}if(this.opts.enable_overlays){i.gv_panelWrap.append(i.gv_overlay,i.gv_showOverlay)}if(this.opts.show_captions){i.gv_frame.append(i.gv_caption).appendTo(i.gv_gallery)}this.$el.replaceWith(i.gv_galleryWrap);if(this.opts.pan_images){this.enablePanning()}this.storeImages();this.buildGallery();this.initImages();this.bindActions();i.gv_frame.remove();i.gv_galleryWrap.show();if(this.opts.autoplay){this.startSlideshow(true)}this.updateOverlay(this.iterator);this.updateFilmstrip(this.frameIterator)}};e.fn.galleryView=function(e){if(this.length){return this.each(function(){var t=Object.create(r);t.init(e,this)})}};e.fn.galleryView.defaults={transition_speed:1e3,transition_interval:5e3,easing:"swing",show_panels:true,show_panel_nav:true,enable_overlays:false,panel_width:800,panel_height:400,panel_animation:"fade",panel_scale:"crop",overlay_position:"bottom",pan_images:false,pan_style:"drag",pan_smoothness:15,start_frame:1,show_filmstrip:true,show_filmstrip_nav:true,enable_slideshow:true,autoplay:false,show_captions:false,filmstrip_size:3,filmstrip_style:"scroll",filmstrip_position:"bottom",frame_width:80,frame_height:40,frame_opacity:.4,frame_scale:"crop",frame_gap:5,show_infobar:true,infobar_opacity:1}})(jQuery)